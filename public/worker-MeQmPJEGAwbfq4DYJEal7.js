self.addEventListener("fetch",e=>{const s=new URL(e.request.url);(s.origin.includes("supabase.co")||s.pathname.includes("/rest/v1/"))&&e.respondWith(fetch(e.request).catch(()=>new Response(JSON.stringify({error:"Offline - API unavailable"}),{status:503,headers:{"Content-Type":"application/json"}})))}),self.addEventListener("message",e=>{e.data&&"SKIP_WAITING"===e.data.type&&self.skipWaiting()});